[all:vars]
# Define the cluster name, which will be used to store the resulting kubeconfig file
# in the fetched/ directory. The kubeconfig file will be named <install_name>.kubeconfig
install_name=<installation-name>

# Define the k3s version to install, see https://github.com/k3s-io/k3s/releases
# Directly relates to the Kubernetes version, see https://kubernetes.io/docs/setup/release/notes/
k3s_version=v1.29.7+k3s1

# Systemd directory, where the k3s service file will be installed
systemd_dir=/etc/systemd/system

# Can be generated with e.g.:
# - openssl rand -base64 64
# - pwgen -s 64 1
token="changeme!"
# Extra options for the k3s server, see https://docs.k3s.io/cli/server
# See: https://docs.cilium.io/en/stable/installation/k8s-install-helm/, https://blog.stonegarden.dev/articles/2024/02/bootstrapping-k3s-with-cilium/
extra_server_args="--flannel-backend=none --disable-kube-proxy --disable servicelb --disable-network-policy --disable traefik --cluster-init --data-dir=/<ephemeral-dir>/k3s --kubelet-arg=root-dir=/<ephemeral-dir>/k3s/kubelet --default-local-storage-path=/<ephemeral-dir>/k3s/local-storage --node-external-ip=<control-node-external-ip>"

fetch_dir_path=/home/<user>/<path>/ansible/fetched
# SSH configuration
ansible_user=ubuntu
ansible_ssh_private_key_file=<path-to-private-key>

[control]
node-1 ansible_host=x.x.x.x

[worker]
node-2 ansible_host=x.x.x.x
node-3 ansible_host=x.x.x.x
node-4 ansible_host=x.x.x.x

