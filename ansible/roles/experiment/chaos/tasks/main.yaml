---
- name: Deploy ChaosMesh Operator
  ansible.builtin.include_tasks:
    file: install_helm.yaml
  when: 
    - chaos_experiment_scenario is defined
    - install_chaos_helm is defined and install_chaos_helm
  tags:
    - always

- name: Inject chaos anomaly into target(s)
  ansible.builtin.include_tasks:
    file: inject_anomaly.yaml
  when: 
    - chaos_experiment_scenario is defined
    - inject_chaos_anomaly is defined and inject_chaos_anomaly
  tags:
    - always